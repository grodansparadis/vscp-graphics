{{:pi1l.jpg?nolink&200|}}

====== Setting up the system on Rasperry Pi ======

The [[http://www.raspberrypi.org/|Raspberry Pi]] is a very nice computer and a perfect match for VSCP & Friends. __The VSCP daemon should work on all Raspberry Pi's except the RPi1 with 256 MB memory where the SSL lib fails probably due to out of memory.__ 

If the startup script does not work or if you experience other startup problems you may need to update the firmware of your Raspberry Pi with **rpi-update**

VSCP & Friends has been tested and works very well on Raspberry Pi. 

The setup is the same as on other Unix systems so the instructions to [[Setting up the system on Unix|setup VSCP & Friends on a Unix system]] can be used. 

As an alternative David Steeman have written easy to follow step by step instruction [[http://www.steeman.be:8080/posts/Installing%20VSCP%20on%20a%20Raspberry%20Pi/|here]]. 

**IMPORTANT**
If you plan to use a Raspberry Pi in a control situation you will probably want to make the root filer system read only. [[https://wiki.debian.org/ReadonlyRoot|This is described here]].  If you don't do this you most certainly will find your board not starting after a power loss. Well you may be lucky for some time but eventually it will happen. So make the root partion read only!

Expect the build of VSCP to take half an hour on a Pi version 2 and an hour and a half on Pi version 1.

===== Compile wxWidgets 3.0 on Raspberry Pi =====  

**wxWidgets 3.0 is now available as a package also in Raspian.**

Instead of 2.8.12 you may want the latest version (3.0.2 as of this writing) instead. If so follow these steps
  
  sudo apt-get install build-essential  
  
Install gtk library

  sudo apt-get install libgtk2.0-dev
  
Compile wxWidgets
  
  cd /path/to/wxWidgets-3.0.x
  mkdir gtk-build
  gtk-build
  ../configure
  make
  make install
  
===== Read only SD on Raspberry Pi =====

For the full story read [[http://wiki.debian.org/ReadonlyRoot|this]]

Short instructions form [[https://www.raspberrypi.org/forums/viewtopic.php?p=213440|here]]. There is an alternative solution [[https://www.raspberrypi.org/forums/viewtopic.php?f=29&t=23154|here]]

When working with this and you need to add a driver or something you can always mount the filesystem rw again with

  mount -o remount,rw /

==== Step 1 ====
mount /var/log and /tmp in ram (here 30MB per each) by adding 
  # Tempfiles in RAM
  RAMTMP=yes
to // /etc/default/rcS //  

==== Step 2 ====

Change // /etc/fstab // to
   proc            /proc           proc    defaults                                 0    0
   tmpfs           /tmp            tmpfs   nodev,nosuid,size=30M,mode=1777          0    0
   tmpfs           /var/log        tmpfs   nodev,nosuid,size=30M,mode=1777          0    0
   #/dev/mmcblk0p1 /boot           vfat    defaults                                 0    2
   /dev/mmcblk0p2  /               ext2    defaults,ro,noatime,errors=remount-ro    0    1
   #/dev/mmcblk0p3 /home           ext4    defaults,noatime                         0    1
   # a swapfile is not a swap partition, so no using swapon|off from here on, use  dphys-swapfile swap[on|off]  for that

It is good to have a rw home partition, or desktop session will fail to start. With this configuration you won't be able to upgrade packages, as apt and dpkg need /var/lib and /var/cache writable. Consider using a rw /var or per-subdirectory configuration.

==== Step 3 ====

edit // /etc/init.d/hwclock.sh //
in line 60 (the first of start case) change "-f" to "-L"

==== Step 4 ====

edit // /etc/environment // and add
   BLKID_FILE="/var/local/blkid.tab"

==== Step 5 ====

Fix mtab

  sudo rm /etc/mtab
  sudo ln -s /proc/self/mounts /etc/mtab
  
==== Step 6 ====  

  * Make sure VSCP log files go to /var/log or that they are turned off.
  * Set varible autosave to zero.
  * Remember that any logger driver has to log to a r/w location.

\\ 
----
{{  ::copyright.png?600  |}}

<HTML><p style="color:red;text-align:center;"><a href="http://www.grodansparadis.com">Grodans Paradis AB</a></p></HTML>
 